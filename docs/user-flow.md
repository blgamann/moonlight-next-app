# Use Flow

moonlight는 관계가 피어나는 달빛 정원입니다. 이곳은 **기본적으로 제공되는 책에 대한 감상 질문 또는 향후 저자/출판사가 던지는** 깊이 있는 질문에 사용자들이 답변을 남기며 자연스럽게 서로를 발견하고 연결되는 공간입니다.

hint: 깊고 느린 연결, 책 기반의 틴더

큰 메뉴: 발견, 연결

작은 메뉴: 검색, 알림, 마이 프로필

숨김 메뉴(다른 페이지를 통해 진입): 가든(책), 프로필(상대방 프로필), 상세 답변, 감상 작성 페이지

중요 개념:

- **함께 읽은 책**: 나와 상대방의 서재에 공통으로 등록된 책 목록입니다.
- **관심 표현**: 다른 사용자의 프로필이나 답변에 관심을 표현하는 기능입니다. 관심 대상 옆의 '관심 버튼'을 10초간 길게 눌러 '관심 프로필' 또는 '관심 답변'으로 등록합니다. 이는 Moonlight의 '깊고 느린 연결' 철학을 반영합니다.
- **상호 관심**: 두 사용자(A와 B)가 서로 상대방의 프로필에 관심을 표현했을 때 형성됩니다. 이 경우에만 양측에게 알림이 전송됩니다.
- **소울라인(Soulline)**: 사용자 간의 관계를 촌수(1촌, 2촌 등)로 시각화한 네트워크 그래프입니다. 각 사용자의 프로필 사진이 선으로 연결되며, 촌수는 관계의 거리를 나타냅니다. 모든 관계의 기본 단위는 1촌이며, 이는 초대를 통해 가입한 경우 또는 서로 소울메이트가 된 경우에 형성됩니다. 이 1촌 연결을 통해 관계망이 확장됩니다. 즉, 나의 1촌과 1촌으로 연결된 다른 사용자는 나에게 2촌이 되며, 이 2촌 사용자와 다시 1촌으로 연결된 사용자는 나에게 3촌이 되는 방식으로 관계의 거리가 표현됩니다.
  > 현재는 초대 코드와 링크 UI를 구현에서 제외하며, 추후 별도로 개발 예정
- **소울링크(Soullink)**: '상호 관심'이 확인된 후, 두 사용자 중 어느 한쪽이라도 더 깊은 관계를 원한다면 '연결' 페이지의 '매치' 탭에서 상대방을 향해 '소울링크 띄우기' 버튼을 누를 수 있습니다. 이는 "당신과 특별한 연결(소울메이트)을 맺고 싶습니다"라는 한 단계 더 나아간 의사 표현입니다. 이때, 내가 먼저 '소울링크 띄우기'를 해도 상대방에게는 즉시 알림이 가지 않습니다. 하지만 상대방도 나에게 '소울링크 띄우기'를 선택하여 서로의 마음이 확인되면, 양측 모두에게 '소울메이트'가 되었다는 기쁜 알림이 전달되고 두 사람은 특별한 '소울메이트' 관계로 이어집니다.
- **소울메이트(Soulmate)**: 양측 모두 '소울링크 띄우기'를 완료하여 상호 연결이 확인된 특별한 관계입니다.

## 발견

왼쪽에는 프로필 정보, 소울라인, 그리고 함께 읽은 책이 표시됩니다. 프로필 정보는 사진, 이름, 소개글로 구성됩니다.

앱에서는 스와이프로, 웹에서는 넘김 버튼으로 최대 5명의 프로필을 볼 수 있습니다. 답변이 마음에 든다면 관심 버튼을 길게(약 10초) 눌러 관심 답변으로 등록할 수 있습니다. 마찬가지로 프로필도 관심 버튼을 길게 눌러 관심 프로필로 등록할 수 있습니다.

이 페이지에서는 사용자 프로필이나 책을 클릭하여 각각 프로필 페이지와 가든(책) 페이지로 직접 이동할 수 있습니다.

하단에는 간단한 CTA 문구가 있습니다. "다른 분들과 연결되고 싶다면 읽은 책을 검색하고 나의 감상을 공유하세요"라는 안내 메시지와 '책 검색하기' 버튼이 있으며, 버튼을 누르면 검색 화면으로 이동합니다.

## 연결

연결, 매치, 관심의 3개 탭이 있습니다. 연결 탭에서는 소울메이트들의 프로필 리스트를 확인할 수 있습니다. 매치 탭에서는 상호 관심이 이루어진 프로필 리스트가 표시되며, 소울링크 띄우기 버튼을 통해 소울링크를 활성화할 수 있습니다. 관심 탭에서는 관심 답변과 관심 프로필 리스트를 볼 수 있습니다.

> 상대방이 '매치' 탭을 열어보지 않으면 서로의 의사를 확인할 수 없음. (UX에 알림 힌트나 배지 추가 필요)

### 검색

책 검색 기능을 제공합니다. 자체 책 데이터베이스가 없어 'Naver 도서' 사이트의 오픈 데이터를 활용합니다. 예를 들어 '유교' 관련 책을 검색하려면 [https://book-server-roan.vercel.app/books/유교](https://book-server-roan.vercel.app/books/%EC%9C%A0%EA%B5%90)와 같이 검색할 수 있습니다. 이를 위한 서버는 이미 구축되어 있으며, 검색 결과는 아래의 데이터 구조를 따릅니다.

```json
{
  "lastBuildDate": "날짜 문자열",        // 데이터 생성 시간
  "total": 전체 검색 결과 수 (정수),
  "start": 현재 페이지 시작 인덱스 (정수),
  "display": 한 번에 보여줄 결과 수 (정수),
  "items": [ ... ]                      // 책 정보 리스트
}
```

```json
{
  "title": "책 제목",
  "link": "책 상세 링크 (네이버 쇼핑 도서)",
  "image": "책 표지 이미지 URL",
  "author": "저자",
  "discount": "할인가 (문자열)",
  "publisher": "출판사",
  "pubdate": "출판일 (YYYYMMDD 형식)",
  "isbn": "ISBN 번호",
  "description": "책 설명 (HTML 또는 텍스트)"
}
```

검색 결과는 책의 이미지, 제목, 저자, 출판사 정보만 표시됩니다. 목록에서 원하는 책을 선택하면 해당 가든(책) 페이지로 이동합니다.

### 가든

책의 이미지, 제목, 저자 정보가 표시됩니다. "서재에 추가하기"와 "감상 공유하기" CTA 버튼이 함께 있습니다. 서재에 추가하기를 누르면 해당 책이 서재에 저장됩니다. 감상 공유하기를 누르면 "{책 이름}에 대한 나의 느낌을 공유해주세요"라는 기본 질문(향후 저자/출판사 등을 통해 다양한 질문 추가 예정)에 답변을 작성할 수 있습니다.

아래에는 "{책 이름}에 대한 나의 느낌을 공유해주세요"에 대한 답변 리스트가 보입니다. 해당 리스트 중 하나를 누르면 상세 답변 페이지로 이동합니다.

### (마이) 프로필

프로필은 나의 프로필과 상대방 프로필 페이지로 구분이 되지만 레이아웃은 동일합니다. 상단에는 프로필 사진과 이름, 그리고 소개가 존재합니다. 이외의 읽은 책 개수와 남긴 답변의 수도 함께 보입니다. 나의 프로필 페이지에서는 프로필 사진, 이름, 소개글 등을 편집할 수 있는 기능이 제공됩니다.

상대방 프로필에서는 상단 프로필 정보 아래, 또는 특정 영역에 신택스 정보인 소울라인과 함께 읽은 책이 표시됩니다.

하단에는 2개의 탭이 있으며, 그중 '답변' 탭에는 책 관련 질문에 대한 답변 목록이, '서재' 탭에는 읽은 책들의 목록이 표시됩니다. 답변 탭에서는 답변 목록을 확인할 수 있으며, 답변을 클릭하면 상세 화면으로 이동합니다. 서재 탭에서는 읽은 책 목록이 표시되며, 책을 선택하면 해당 가든(책) 페이지로 이동합니다.

### 감상 작성 페이지

사용자가 '가든(책)' 페이지에서 "감상 공유하기" 버튼을 눌렀을 때 진입하는 페이지입니다. 상단에는 관련 책 정보와 "{책 이름}에 대한 나의 느낌을 공유해주세요"와 같은 질문이 표시됩니다. 사용자는 이곳에서 답변의 제목과 내용을 작성하여 제출할 수 있습니다.

### 상세 답변

책 정보와 질문 정보를 상단에서 확인할 수 있습니다. 답변자의 프로필 이미지, 이름, 작성일이 표시되며, 그 아래에 글의 제목과 답변 내용이 나타납니다.

### 알림

상호 관심이 이루어졌을 때와 상호 소울링크(띄우기)가 활성화되었을 때 알림이 발생합니다.
